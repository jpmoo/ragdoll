# Copy to env.ragdoll and edit. All RAGDoll variables in one place.
# The app loads env.ragdoll from the project root (or RAGDOLL_ENV path) at startup.
# For systemd: use EnvironmentFile=/opt/ragdoll/env.ragdoll in the unit, or keep /etc/default/ragdoll-ingest.

# --- Required ---
# Folder to watch for new files
RAGDOLL_INGEST_PATH=/path/to/your/ingest/folder

# --- Output (optional) ---
# Where to put per-group RAG outputs: {DATA_DIR}/{group}/ragdoll.db, processed.jsonl, action.log, sources/, artifacts/
# Each ingest subfolder becomes a separate group; top-level files use _root.
# RAGDOLL_OUTPUT_PATH=/var/lib/ragdoll
# or: RAGDOLL_DATA_DIR=/var/lib/ragdoll

# Sync pass: dedup DB per group. Every N seconds; 0=disabled.
# RAGDOLL_SYNC_INTERVAL=300

# --- Ollama ---
# RAGDOLL_OLLAMA_HOST=http://localhost:11434
# RAGDOLL_EMBED_MODEL=nomic-embed-text:latest
# RAGDOLL_CHUNK_MODEL=llama3.2:3b
# RAGDOLL_INTERPRET_MODEL=llama3.2:3b   # chart/table interpretation (default: CHUNK_MODEL)
# RAGDOLL_QUERY_MODEL=llama3.2:3b   # query expansion for /query endpoint (default: llama3.2:3b)

# --- API Server ---
# RAGDOLL_API_PORT=9042   # HTTP API server port (default: 9042)

# --- Garbage Control ---
# Filter low-value chunks before embedding. All rejections logged to {group}/garbage.log
# RAGDOLL_GARBAGE_MIN_CHARS=20        # Minimum characters (default: 20)
# RAGDOLL_GARBAGE_MIN_TOKENS=10       # Minimum tokens (default: 10)
# RAGDOLL_GARBAGE_MIN_DIVERSITY=0.3   # Minimum lexical diversity 0.0-1.0 (default: 0.3)
# RAGDOLL_GARBAGE_MAX_STOPWORD_RATIO=0.7  # Max stopword ratio 0.0-1.0 (default: 0.7)
# RAGDOLL_GARBAGE_MIN_SCORE=0.3       # Minimum meaningfulness score 0.0-1.0 (default: 0.3)
# RAGDOLL_GARBAGE_LLM_VALIDATION=false  # Enable optional LLM validation (default: false)

# --- Chunking ---
# RAGDOLL_TARGET_CHUNK_TOKENS=400
# RAGDOLL_MAX_CHUNK_TOKENS=600
# RAGDOLL_OVERLAP_SENTENCES=1
# RAGDOLL_CHUNK_LLM_TIMEOUT=300

# --- Docling (optional) ---
# Use Docling for PDF/DOCX/XLSX/PPTX/image ingestion (better tables/layout). Requires: pip install -e '.[docling]'
# RAGDOLL_USE_DOCLING=false   # set true to enable; falls back to legacy extractors on failure
